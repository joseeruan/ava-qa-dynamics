---
review_date: {{date}}
review_scope: {{review_scope}}
review_strictness: {{review_strictness}}
quality_score: {{overall_score}}
quality_grade: {{grade}}
---

# Code Review Report

**Review Date:** {{date}}  
**Review Scope:** {{review_scope}}  
**Strictness Level:** {{review_strictness}}  
**Performed By:** DQA Module v{{module_version}}

---

## Executive Summary

**Overall Quality Score:** {{overall_score}}/100 (Grade: {{grade}})

{{executive_summary}}

### Quick Stats

| Metric | Count |
|--------|-------|
| Files Reviewed | {{files_reviewed_count}} |
| Critical Issues | {{critical_issues_count}} |
| High Priority Issues | {{high_issues_count}} |
| Medium Priority Issues | {{medium_issues_count}} |
| Low Priority Issues | {{low_issues_count}} |
| **Total Issues** | **{{total_issues_count}}** |

### Score Breakdown

| Category | Score | Grade |
|----------|-------|-------|
| Code Safety | {{safety_score}}/100 | {{safety_grade}} |
| Performance | {{performance_score}}/100 | {{performance_grade}} |
| Maintainability | {{maintainability_score}}/100 | {{maintainability_grade}} |
| Best Practices | {{best_practices_score}}/100 | {{best_practices_grade}} |

---

## Critical Issues (URGENT) ðŸš¨

{{antipattern_detection_critical}}

---

## High Priority Issues ðŸ”´

{{antipattern_detection_high}}

---

## Medium Priority Issues ðŸŸ¡

{{antipattern_detection_medium}}

---

## Low Priority Issues ðŸŸ¢

{{antipattern_detection_low}}

---

## Test Coverage Analysis

{{test_coverage_analysis}}

---

## Comparison Metrics

{{comparison_metrics}}

---

## Prioritized Recommendations

### URGENT (Fix Immediately)

{{prioritized_recommendations_urgent}}

**Estimated Effort:** {{urgent_effort_hours}} hours

---

### HIGH (This Sprint)

{{prioritized_recommendations_high}}

**Estimated Effort:** {{high_effort_hours}} hours

---

### MEDIUM (Next Sprint)

{{prioritized_recommendations_medium}}

**Estimated Effort:** {{medium_effort_hours}} hours

---

### LOW (Backlog)

{{prioritized_recommendations_low}}

**Estimated Effort:** {{low_effort_hours}} hours

---

## Best Practices Observed âœ…

{{best_practices_observed}}

---

## Action Plan

{{action_plan}}

---

## How to Fix Common Issues

### Missing Depth Validation

```csharp
// Add this at the start of your Execute method
public void Execute(IServiceProvider serviceProvider)
{
    var context = (IPluginExecutionContext)serviceProvider.GetService(typeof(IPluginExecutionContext));
    
    // CRITICAL: Prevent infinite loops
    if (context.Depth > 1) return;
    
    // Rest of your plugin logic...
}
```

### Unpaginated Queries

```csharp
// Before (BAD)
var query = new QueryExpression("account");
query.ColumnSet = new ColumnSet(true);
var results = service.RetrieveMultiple(query);

// After (GOOD)
var query = new QueryExpression("account");
query.ColumnSet = new ColumnSet("name", "accountnumber"); // Specific columns
query.TopCount = 5000; // Limit results
var results = service.RetrieveMultiple(query);
```

### Missing Null Checks

```csharp
// Before (BAD)
var accountName = entity["name"].ToString();

// After (GOOD)
if (entity.Contains("name") && entity["name"] != null)
{
    var accountName = entity["name"].ToString();
}
```

### Missing Exception Handling

```csharp
public void Execute(IServiceProvider serviceProvider)
{
    try
    {
        // Your plugin logic
    }
    catch (Exception ex)
    {
        tracingService.Trace("Error: " + ex.Message);
        throw new InvalidPluginExecutionException("An error occurred in plugin.", ex);
    }
}
```

---

## Next Steps

1. **Address Critical Issues** - Fix all severity 10 issues immediately
2. **Review High Priority** - Plan fixes for high priority issues this sprint
3. **Re-run Review** - Validate fixes with another code review
4. **Integrate into CI/CD** - Automate reviews for every PR
5. **Track Progress** - Run monthly reviews to monitor quality trends

### Running Another Review

```bash
# Use DQA agent
agent qa-dynamics-assistant
*review
```

### Generating Tests for Untested Code

```bash
# Use DQA agent
agent qa-dynamics-assistant
*generate
```

---

## Report Metadata

- **Generated By:** Dynamics QA Assistant
- **Module Version:** {{module_version}}
- **Review Engine:** DQA Anti-Pattern Detector
- **Report Format:** Markdown
- **Output Location:** {default_output_file}

---

*This report was automatically generated by the Dynamics QA Assistant (DQA) module. For questions or support, refer to module documentation.*
